create table dw_open_api_response_param
(
    id                  int auto_increment comment '自增ID'
        primary key,
    lessee_id           int                             not null comment '租户ID',
    data_asset_api_id   int                             not null comment '数据资产ID',
    asset_column        varchar(100)                    not null comment '列名称',
    asset_data_type     varchar(32)                     not null comment '列数据类型[如string]',
    asset_column_length int                             null comment '列长度',
    responded           tinyint     default 0           null comment '是否有值[0-响应,;1-无响应]',
    description         varchar(255)                    null comment '字段描述',
    type                varchar(16)                     null comment '响应类型[0-body;1-head]',
    parent_id           int         default 0           null comment '父级字段id',
    create_time         datetime                        null comment '创建时间',
    update_time         datetime                        null comment '最后更新时间',
    create_by           varchar(32)                     null comment '创建者',
    update_by           varchar(32)                     null comment '最后更新者',
    business_type       int         default 0           null comment '响应业务类型，0：普通http响应模板，1：流程编排结果响应模板',
    param_value_type    varchar(32) default 'reference' null comment '参数值类型，fixed：固定值，reference：引用值,function:函数',
    default_value       varchar(255)                    null comment '默认值',
    expression          varchar(255)                    null comment '返回模板jsonpath表达式',
    result_column_type  varchar(32) default 'object'    null comment '字段类型:string,integer,boolean,array,object,number',
    response_post_data  text                            null comment '响应体内容(jsonSchema或xml)',
    is_schema           tinyint                         null comment '0：xml 1：jsonSchema'
)
    comment 'API响应参数;1、api对应的响应参数配置';

create index idx_data_asset_id_lessee_id
    on dw_open_api_response_param (data_asset_api_id, lessee_id);

INSERT INTO wd_ipaas.dw_open_api_response_param (id, lessee_id, data_asset_api_id, asset_column, asset_data_type, asset_column_length, responded, description, type, parent_id, create_time, update_time, create_by, update_by, business_type, param_value_type, default_value, expression, result_column_type, response_post_data, is_schema) VALUES (162, 3, 22, 'body', 'json', null, 0, null, 'BODY', 0, '2024-08-30 15:27:15', '2024-08-30 15:27:15', '13012345678', '13012345678', 0, null, null, null, null, '{"root":{"type":"object","properties":{"code":{"type":"integer","format":"int32","name":"code"},"data":{"type":"array","items":{"type":"object","properties":{"attrCode":{"type":"string","description":"组织架构的业务单元属性属性","name":"attrCode"},"buName":{"type":"string","description":"业务单元名称名称","name":"buName"},"buStatus":{"type":"integer","format":"int32","description":"应用状态 0-禁用 1-启用","name":"buStatus"},"buType":{"type":"integer","format":"int32","description":"业务单元类型 0-应用","name":"buType"},"createBy":{"type":"string","description":"创建人","name":"createBy"},"createTime":{"type":"string","format":"date-time","description":"创建时间","name":"createTime"},"id":{"type":"integer","format":"int64","description":"id","name":"id"},"internalEnterpriseStatus":{"type":"integer","format":"int32","name":"internalEnterpriseStatus"},"merchantStatus":{"type":"integer","format":"int32","name":"merchantStatus"},"nodeCode":{"type":"string","description":"组织架构的节点编码","name":"nodeCode"},"nodeId":{"type":"integer","format":"int64","description":"组织架构的节点Id","name":"nodeId"},"nodeLeaf":{"type":"integer","format":"int32","description":"在组织架构是否叶子节点， 1是，0 否","name":"nodeLeaf"},"nodeParentId":{"type":"integer","format":"int64","description":"组织架构父节点ID","name":"nodeParentId"},"nodeParentIdList":{"type":"array","description":"组织架构父节点ID（支持一个业务单元挂多个组织节点的情况）","items":{"type":"integer","format":"int64","name":"items"},"name":"nodeParentIdList"},"orgNodeInfoDTOList":{"type":"array","description":"组织架构父节点ID（支持一个业务单元挂多个组织节点的情况）","items":{"type":"object","properties":{"nodeId":{"type":"integer","format":"int64","description":"组织架构id","name":"nodeId"},"orgNodeParentIds":{"type":"string","description":"组织架构父节点ID，节点间使用,分隔","name":"orgNodeParentIds"}},"title":"OrgNodeInfoDTO","name":"items"},"name":"orgNodeInfoDTOList"},"parentId":{"type":"integer","format":"int64","description":"父节点id  0代表一级","name":"parentId"},"seq":{"type":"integer","format":"int32","description":"在组织结构的显示顺序，不传默认最高优先级","name":"seq"},"syncOrg":{"type":"integer","format":"int32","name":"syncOrg"},"tenantId":{"type":"integer","format":"int64","description":"租户id","name":"tenantId"},"updateBy":{"type":"string","description":"更新人","name":"updateBy"},"updateTime":{"type":"string","format":"date-time","description":"更新时间","name":"updateTime"}},"title":"BusinessUnitDTO","father_node":["BusinessUnitDTO"],"father_node_name":"BusinessUnitDTO","name":"items"},"name":"data"},"msg":{"type":"string","name":"msg"},"success":{"type":"boolean","name":"success"}},"title":"ResultDTO«List«BusinessUnitDTO»»","father_node":["ResultDTO«List«BusinessUnitDTO»»"],"father_node_name":"ResultDTO«List«BusinessUnitDTO»»","name":"root"}}', 1);
INSERT INTO wd_ipaas.dw_open_api_response_param (id, lessee_id, data_asset_api_id, asset_column, asset_data_type, asset_column_length, responded, description, type, parent_id, create_time, update_time, create_by, update_by, business_type, param_value_type, default_value, expression, result_column_type, response_post_data, is_schema) VALUES (173, 3, 23, 'body', 'json', null, 0, null, 'BODY', 0, '2024-11-19 14:34:12', '2024-11-19 14:34:12', '13012345678', '13012345678', 0, null, null, null, null, '{"root":{"type":"object","name":"root","description":"根层级","properties":{"field_0.4672454944745075":{"name":"code","type":"integer"},"field_0.08448360847229464":{"name":"data","type":"object","properties":{"field_0.4682461556430073":{"type":"string","name":"custfield_phone","description":"手机号"},"field_0.5225455056502064":{"type":"string","name":"registerTime","description":"注册时间"},"field_0.474715282976645":{"name":"channel","description":"渠道","type":"integer"},"field_0.11788854150124872":{"name":"clubExtData","description":" 俱乐部会员扩展数据","type":"object"},"field_0.09975073551662761":{"name":"clubId","description":"俱乐部id","type":"integer"},"field_0.11312360239703656":{"type":"string","name":"updateTime","description":"更新时间"},"field_0.7463065731897429":{"name":"levelExpiredTime","description":"等级过期时间","type":"string"},"field_0.37948369378233204":{"name":"levelInfo","type":"object","description":"等级信息","properties":{"field_0.03987102687328159":{"type":"string","name":"levelName","description":" 等级名称"},"field_0.44468837828208696":{"name":"levelNum","type":"integer","description":"等级级别"},"field_0.9702955053194136":{"type":"string","name":"levelCode","description":"等级编码"},"field_0.6701426913790332":{"name":"validDuration","type":"integer","description":"有效时长"},"field_0.11088951367236888":{"name":"validDurationUnit","type":"integer","description":"有效时长单位"}}}}},"field_0.5363444544365747":{"type":"string","name":"msg"}}}}', null);
